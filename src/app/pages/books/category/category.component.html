<mat-list style="padding-top:0px">
    <mat-list-item *ngFor="let category of (categories$ | async)"
                   (click)="select(category.id)"
                   [class.selected]="selectedId == category.id"
                   style="height:auto;min-height:48px"
                   fxLayout="column"
                   fxLayoutAlign="center none">
        <span *ngIf="!(edit$ | async)" class="item">
            {{ category.title }}
        </span>
        <div *ngIf="edit$ | async" fxLayout="rows">
            <button *ngIf="!edited.isSelected(category.id); else edit_block"
                    mat-icon-button 
                    (click)="delete(category.id, $event)" 
                    style="color:lightgray">
                <mat-icon>close</mat-icon>
            </button>
            <ng-template #edit_block>
                <button mat-icon-button 
                (click)="edit(category.id, category.title)" 
                style="color:lightgray">
                    <mat-icon>done</mat-icon>
                </button>
            </ng-template>
            <input class="edit transparent-background"
                    [(ngModel)]="category.title"
                    placeholder="Category"
                    (ngModelChange)="edited.select(category.id)"
                    (keydown.enter)="edit(category.id, category.title)"/>
        </div>
    </mat-list-item>

    <mat-list-item *ngIf="edit$ | async">
        <button mat-icon-button
                style="color:lightgray"
                (click)="add(new.value); new.value = ''">
            <mat-icon>add</mat-icon>
        </button>
        <input class="edit transparent-background"
                #new
                placeholder="Category"
                (keydown.enter)="add(new.value); new.value = ''"/>
    </mat-list-item>
</mat-list>
