<div class="main"
     fxLayout="column">
    <mat-tab-group *ngIf="(edit$ | async) ; else view" 
                   style="height:100%"> 
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon>edit</mat-icon>
                <span style="margin-left:5px">Edit</span>
            </ng-template>
            <div style="height:100vh">
                <app-text-editor [code]="text" 
                                 (change)="text = $event">
                </app-text-editor>
            </div>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                <mat-icon>visibility</mat-icon>
                <span style="margin-left:5px">View</span>
            </ng-template>
            <div style="margin:10px" (click)="handleClick($event)" [innerHtml]="text"></div>
        </mat-tab>
    </mat-tab-group>

    <ng-template #view>
        <div (click)="handleClick($event)" style="margin:10px" [innerHtml]="text"></div>
    </ng-template>

    <ng-template *ngIf="!(edit$ | async)" ngFor let-txt [ngForOf]= "texts">
        <div [id]="txt.id" *ngIf="txt.id != lst_id" class="text-card" (click)="handleClick($event)"
            [innerHtml]="txt.text"></div>
        <div [id]="txt.id" *ngIf="txt.id == lst_id" class="text-card selected" (click)="handleClick($event)" 
            [innerHtml]="txt.text"></div>
    </ng-template>
</div>

<div style="position:absolute; bottom:10px; margin-left:10px; z-index:100"
    *ngIf="(edit$ | async)">
    <button mat-button (click)="save()">Save</button>
</div>